<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Inventario - Ecoempresarias</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../styles/styles.css">
</head>
<body>

    <!-- NAVBAR -->
    <nav>
        <div class="nav-container">
            <a href="../index.html" class="logo">
                <img src="../imagenes/logo.png" alt="Logo" class="logo-img">
                Ecoempresarias
            </a>
            <ul class="nav-links">
                <li><a href="#features">Emprendedores</a></li>
                <li><a href="#entrepreneurs">Productos</a></li>
                <li><a href="#contact">Carrito</a></li>
                <li><a href="/Eventos/eventos.html">Eventos</a></li>
                <li><a href="/Productos/entregasYseguimientos.html">Entregas y seguimientos</a></li>
                <li><a href="#contact">Mapas</a></li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        Administrador
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">Usuarios</a></li>

                        <li><a class="dropdown-item" href="#">Gestion de Roles</a></li>
                        <li><a class="dropdown-item" href="../Aprobaciones/revisionProductos.html">Revisión de productos</a></li>
                        <li><a class="dropdown-item" href="/Municipalidad/solucitudes.html">Aprobacion de
                                solicitudes</a></li>
                        <li><a class="dropdown-item" href="#">Sistema de Inteligencia Municipal</a></li>
                        <li><a class="dropdown-item" href="#">Analisis de sectores</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        Emprendedor
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">Inventario</a></li>
                        <li><a class="dropdown-item" href="../Productos/AdministracionProductosEmprendedor.html">Mis Productos</a></li>
                        <li><a class="dropdown-item" href="/Analisis/analiticasDelNegocio.html">Analiticas del
                                negocio</a></li>
                        <li><a class="dropdown-item" href="/Eventos/misEventos.html">Mis Eventos</a></li>
                    </ul>
                </li>
                <li><a href="#contact">Iniciar Sesión</a></li>

            </ul>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <div class="container-fluid py-4">
        <div class="row">
            <div class="col-12">
                <!-- Header -->
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div>
                        <h1 class="h2 mb-1">
                            <i class="fas fa-warehouse text-primary me-2"></i>
                            Gestión de Inventario
                        </h1>
                        <p class="text-muted mb-0">Administra el stock de tus productos</p>
                    </div>
                    <!-- <div class="d-flex gap-2">
                        <button class="btn btn-outline-primary" onclick="exportarInventario()">
                            <i class="fas fa-download me-2"></i>Exportar
                        </button>
                    </div> -->
                </div>

                <!-- Estadísticas -->
                <div class="row g-3 mb-4">
                    <div class="col-md-3 col-sm-6">
                        <div class="stat-card bg-primary">
                            <div class="stat-icon">
                                <i class="fas fa-boxes"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="totalProductos">0</div>
                                <div class="stat-label">Total Productos</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6">
                        <div class="stat-card bg-success">
                            <div class="stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="enStock">0</div>
                                <div class="stat-label">En Stock</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6">
                        <div class="stat-card bg-warning">
                            <div class="stat-icon">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="stockBajo">0</div>
                                <div class="stat-label">Stock Bajo</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6">
                        <div class="stat-card bg-danger">
                            <div class="stat-icon">
                                <i class="fas fa-times-circle"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="sinStock">0</div>
                                <div class="stat-label">Sin Stock</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Filtros y Búsqueda -->
                <div class="card shadow-sm mb-4">
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="input-group">
                                    <span class="input-group-text bg-white">
                                        <i class="fas fa-search text-muted"></i>
                                    </span>
                                    <input type="text" 
                                           class="form-control" 
                                           id="buscarProducto" 
                                           placeholder="Buscar por nombre de producto..."
                                           onkeyup="filtrarInventario()">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <select class="form-select" id="filtroCategoria" onchange="filtrarInventario()">
                                    <option value="">Todas las categorías</option>
                                    <option value="Alimentos">Alimentos</option>
                                    <option value="Artesanías">Artesanías</option>
                                    <option value="Textiles">Textiles</option>
                                    <option value="Cosmética">Cosmética</option>
                                    <option value="Joyería">Joyería</option>
                                    <option value="Decoración">Decoración</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <select class="form-select" id="filtroStock" onchange="filtrarInventario()">
                                    <option value="">Todos los niveles</option>
                                    <option value="alto">Stock Alto (>20)</option>
                                    <option value="medio">Stock Medio (11-20)</option>
                                    <option value="bajo">Stock Bajo (1-10)</option>
                                    <option value="sin">Sin Stock (0)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tabla de Inventario -->
                <div class="card shadow-sm">
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-hover mb-0" id="tablaInventario">
                                <thead class="table-light">
                                    <tr>
                                        <th class="px-4">Producto</th>
                                        <th>Categoría</th>
                                        <th>Precio</th>
                                        <th class="text-center">Stock Actual</th>
                                        <th class="text-center">Estado</th>
                                        <th class="text-center">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="inventarioBody">
                                    <tbody id="inventarioBody">
                                        <tr>
                                            <td class="px-4 fw-semibold">Jabón Artesanal de Lavanda</td>
                                            <td>Cosmética</td>
                                            <td>₡4 500</td>
                                            <td class="text-center">25</td>
                                            <td class="text-center">
                                                <span class="badge bg-success">Stock Alto</span>
                                            <td class="text-center">
                                                    <!-- Editar Stock -->
                                                    <button 
                                                        class="btn btn-sm btn-outline-primary me-1"
                                                        data-bs-toggle="modal"
                                                        data-bs-target="#modalEditarStock"
                                                        title="Editar stock">
                                                        <i class="fas fa-edit"></i>
                                                    </button>

                                                   
                                                </td>
                                        </tr>

                                        <tr>
                                            <td class="px-4 fw-semibold">Bolso Tejido a Mano</td>
                                            <td>Artesanías</td>
                                            <td>₡18 000</td>
                                            <td class="text-center">12</td>
                                            <td class="text-center">
                                                <span class="badge bg-warning text-dark">Stock Medio</span>
                                            </td>
                                            <td class="text-center">
                                                        <!-- Editar Stock -->
                                                        <button 
                                                            class="btn btn-sm btn-outline-primary me-1"
                                                            data-bs-toggle="modal"
                                                            data-bs-target="#modalEditarStock"
                                                            title="Editar stock">
                                                            <i class="fas fa-edit"></i>
                                                        </button>

                                                        
                                                    </td>
                                        </tr>

                                        <tr>
                                            <td class="px-4 fw-semibold">Aretes de Madera</td>
                                            <td>Joyería</td>
                                            <td>₡6 000</td>
                                            <td class="text-center">5</td>
                                            <td class="text-center">
                                                <span class="badge bg-danger">Stock Bajo</span>
                                            </td>
                                            <td class="text-center">
                                                <!-- Editar Stock -->
                                                <button 
                                                    class="btn btn-sm btn-outline-primary me-1"
                                                    data-bs-toggle="modal"
                                                    data-bs-target="#modalEditarStock"
                                                    title="Editar stock">
                                                    <i class="fas fa-edit"></i>
                                                </button>

                                               
                                            </td>
                                        </tr>

                                        <tr>
                                            <td class="px-4 fw-semibold">Velas Aromáticas</td>
                                            <td>Decoración</td>
                                            <td>₡7 500</td>
                                            <td class="text-center">0</td>
                                            <td class="text-center">
                                                <span class="badge bg-secondary">Sin Stock</span>
                                            </td>
                                            <td class="text-center">
                                                <!-- Editar Stock -->
                                                <button 
                                                    class="btn btn-sm btn-outline-primary me-1"
                                                    data-bs-toggle="modal"
                                                    data-bs-target="#modalEditarStock"
                                                    title="Editar stock">
                                                    <i class="fas fa-edit"></i>
                                                </button>

                                                
                                            </td>
                                        </tr>
                                    </tbody>
                                </tbody>
                            </table>
                        </div>

                        <!-- Estado Vacío -->
                        <div id="estadoVacio" class="text-center py-5 d-none">
                            <i class="fas fa-box-open fa-4x text-muted mb-3"></i>
                            <h5 class="text-muted">No hay productos en el inventario</h5>
                            <p class="text-muted">Agrega productos desde el módulo "Mis Productos"</p>
                            <a href="productos.html" class="btn btn-primary mt-2">
                                <i class="fas fa-plus me-2"></i>Agregar Productos
                            </a>
                        </div>

                        <!-- Sin Resultados -->
                        <div id="sinResultados" class="text-center py-5 d-none">
                            <i class="fas fa-search fa-4x text-muted mb-3"></i>
                            <h5 class="text-muted">No se encontraron productos</h5>
                            <p class="text-muted">Intenta con otro término de búsqueda o filtro</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Editar Stock -->
    <div class="modal fade" id="modalEditarStock" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title">
                        <i class="fas fa-edit me-2"></i>Editar Stock
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label fw-bold">Producto</label>
                        <p class="text-muted mb-0" id="modalProductoNombre"></p>
                    </div>
                    <div class="mb-3">
                        <label class="form-label fw-bold">Stock Actual</label>
                        <p class="text-muted mb-0">
                            <span id="modalStockActual"></span> unidades
                        </p>
                    </div>
                    <div class="mb-3">
                        <label for="nuevoStock" class="form-label fw-bold">
                            Nuevo Stock <span class="text-danger">*</span>
                        </label>
                        <input type="number" 
                               class="form-control" 
                               id="nuevoStock" 
                               min="0" 
                               placeholder="Ingrese la cantidad de stock"
                               required>
                        <div class="form-text">
                            <i class="fas fa-info-circle me-1"></i>
                            El stock debe ser igual o mayor a 0
                        </div>
                        <div id="errorStock" class="text-danger mt-2 d-none">
                            <i class="fas fa-exclamation-circle me-1"></i>
                            <span id="errorStockMensaje"></span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="motivoCambio" class="form-label fw-bold">Motivo del Cambio</label>
                        <textarea class="form-control" 
                                  id="motivoCambio" 
                                  rows="3" 
                                  placeholder="Ej: Reposición de inventario, ajuste por venta, pérdida, etc."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>Cancelar
                    </button>
                    <button type="button" class="btn btn-primary" onclick="guardarCambioStock()">
                        <i class="fas fa-save me-2"></i>Guardar Cambios
                    </button>
                </div>
            </div>
        </div>
    </div>

    

    <!-- Toast Notification -->
   <!--  <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
        <div id="notificacionToast" class="toast" role="alert">
            <div class="toast-header">
                <i class="fas fa-check-circle text-success me-2" id="toastIcon"></i>
                <strong class="me-auto" id="toastTitulo">Notificación</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toastMensaje"></div>
        </div>
    </div> -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
