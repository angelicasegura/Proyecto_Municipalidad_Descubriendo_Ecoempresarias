<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conociendo a nuestras Ecoempresarias</title>
    <link rel="stylesheet" href="../styles/styles.css">
    <!-- Bootstrap CSS (FALTABA ESTO) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
</head>

<body>
    <!-- NAVEGACIÓN -->
    <!-- NAVBAR -->
    <nav>
        <div class="nav-container">
            <a href="../index.html" class="logo">
                <img src="/ProyectoMunicipalidad/imagenes/logo.png" alt="Logo" class="logo-img">
                Ecoempresarias
            </a>
            <ul class="nav-links">
                <li><a href="../Emprendedores/EmprendimientosPublic.html">Emprendedores</a></li>
                <li><a href="../Productos/AdministracionProductosEmprendedor.html">Productos</a></li>
                <li><a href="../Carrito/carrito.html">Carrito</a></li>
                <li><a href="../Eventos/eventos.html">Eventos</a></li>
                <li><a href="../Productos/entregasYseguimientos.html">Entregas y seguimientos</a></li>
                <li><a href="../Mapas/mapaEmprendimientos.html">Mapas</a></li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        Administrador
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="../Usuarios/Usuarios.html">Usuarios</a></li>

                        <li><a class="dropdown-item" href="#">Gestion de Roles</a></li>
                        <li><a class="dropdown-item" href="../Emprendedores/EmprendedoresAdmin.html">Gestion de
                                emprendimientos</a></li>
                        <li><a class="dropdown-item" href="../Aprobaciones/revisionProductos.html">Revisión de
                                productos</a></li>
                        <li><a class="dropdown-item" href="../Municipalidad/solucitudes.html">Aprobacion de
                                solicitudes</a></li>
                        <li><a class="dropdown-item" href="../Municipalidad/sistemaDeInteligenciaMunicipal.html">Sistema
                                de Inteligencia Municipal</a></li>
                        <li><a class="dropdown-item" href="../Analisis/analisisDeSectores.html">Analisis de sectores</a>
                        </li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">
                        Emprendedor
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="../Inventario/inventario.html">Inventario</a></li>

                        <li><a class="dropdown-item" href="../Productos/AdministracionProductosEmprendedor.html">Mis
                                Productos</a></li>
                        <li><a class="dropdown-item" href="../Analisis/analiticasDelNegocio.html">Analiticas del
                                negocio</a></li>
                        <li><a class="dropdown-item" href="../Eventos/misEventos.html">Mis Eventos</a></li>
                    </ul>
                </li>
                <li><a href="../Usuarios/login.html">Iniciar Sesión</a></li>

            </ul>
        </div>
    </nav>





    <div class="container mt-5">

        <div class="container mb-3">
            <div class="row">
                <div class="col-md-12 mt-4">
                    <a href="/index.html" class="btn btn-primary">
                        Seguir comprando
                    </a>
                </div>
            </div>
        </div>

        <div class="container container-main-carrito">
            <div class="table-responsive">
                <table class="table table-bordered align-middle">
                    <thead class="table-light">
                        <tr>
                            <th scope="col" style="width: 25%;">Producto</th>
                            <th scope="col" style="width: 15%;"> Imagen </th>
                            <th scope="col" style="width: 15%;">Cantidad </th>
                            <th scope="col" style="width: 15%;">Precio Unitario</th>
                            <th scope="col" style="width: 15%;">Total</th>
                            <th scope="col" style="width: 15%;"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <!-- Nombre del producto -->
                            <td><span>Pulsera de cuero Mujer Hang</span></td>

                            <!-- Imagen del producto -->
                            <td>
                                <img src="https://cdn-media.glamira.com/media/product/newgeneration/view/1/sku/hang-tria/alloycolour/yellow/leather/camel.jpg"
                                    width="50px" height="50px" alt="Producto" />
                            </td>

                            <!-- Cantidad -->
                            <td>
                                <div class="input-group quantity-controls mx-auto">
                                    <span th:text=>2</span>
                                </div>
                            </td>

                            <!-- Precio unitario -->
                            <td class="text-end fw-bold">
                                ₡<span>8000</span>
                            </td>

                            <!-- Total por producto -->
                            <td class="text-end fw-bold">
                                ₡<span th:text=>16000</span>
                            </td>

                            <!-- Acciones -->
                            <td>
                                <a class="btn btn-danger btn-sm btn-delete">
                                    Eliminar
                                </a>
                                <a class="btn btn-success btn-sm ms-1 btn-edit" data-cantidad="2">
                                    Editar
                                </a>
                            </td>
                        </tr>
                        <tr>
                            <!-- Nombre del producto -->
                            <td><span>Anillo</span></td>

                            <!-- Imagen del producto -->
                            <td>
                                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRy2IEIxJo2eYH1bYUqCHgbe6ggIY6t-MI6-A&s"
                                    width="50px" height="50px" alt="Producto" />
                            </td>

                            <!-- Cantidad -->
                            <td>
                                <div class="input-group quantity-controls mx-auto">
                                    <span th:text=>1</span>
                                </div>
                            </td>

                            <!-- Precio unitario -->
                            <td class="text-end fw-bold">
                                ₡<span>9000</span>
                            </td>

                            <!-- Total por producto -->
                            <td class="text-end fw-bold">
                                ₡<span th:text=>9000</span>
                            </td>

                            <!-- Acciones -->
                            <td>
                                <a class="btn btn-danger btn-sm btn-delete">
                                    Eliminar
                                </a>
                                <a class="btn btn-success btn-sm ms-1 btn-edit" data-cantidad="1">
                                    Editar
                                </a>
                            </td>
                        </tr>

                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="3"></td>
                            <th class="text-end">Total de la compra</th>
                            <td class="text-end fw-bold">₡<span>25000</span></td>
                            <td>
                                <form>

                                    <div th:if="${not #lists.isEmpty(listaCarrito)}">
                                        <button type="button" class="btn btn-info btn-sm">
                                            Facturar
                                        </button>
                                    </div>

                                </form>
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>

            <div class="row mt-4">
                <div class="col-md-6 mb-3"></div>

                <div class="col-md-6">
                    <div class="p-3 price-total-summary">
                        <div class="row total-summary-row">
                            <div class="col-6">Total productos</div>
                            <div class="col-6 text-end fw-bold">₡<span>25000</span></div>
                        </div>
                        <div class="row total-summary-row">
                            <div class="col-6">TOTAL</div>
                            <div class="col-6 text-end fw-bold">₡<span>25800</span></div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>




    <!-- FOOTER -->
    <footer>
        <div class="footer-container">
            <div class="footer-grid">
                <div class="footer-section">
                    <h4>Sobre Nosotros</h4>
                    <ul>
                        <li><a href="#">Misión</a></li>
                        <li><a href="#">Visión</a></li>
                        <li><a href="#">Historia</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Recursos</h4>
                    <ul>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">Capacitación</a></li>
                        <li><a href="#">Documentos</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Contacto</h4>
                    <ul>
                        <li><a href="mailto:info@ecoempresarias.mx">info@ecoempresarias.mx</a></li>
                        <li><a href="tel:+525555555555">+52 (555) 555-5555</a></li>
                        <li><a href="#">Redes Sociales</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Conociendo a Nuestras Ecoempresarias. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <div class="modal fade" id="modalEditarCantidad" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content shadow-lg">


                <div class="modal-header" style="background: #2ecc71; color: white;">
                    <h5 class="modal-title fw-bold">Editar Cantidad</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">

                    <div class="d-flex align-items-center mb-3 gap-3">
                        <!-- Imagen -->
                        <img id="modalImagen" src="" width="80" height="80" class="rounded border">

                        <!-- Info del producto -->
                        <div>
                            <h6 id="modalNombre" class="fw-bold mb-1"></h6>

                            <div class="text-muted small">
                                Precio unitario: ₡<span id="modalPrecio"></span>
                            </div>

                            <div class="text-muted small">
                                Total actual: ₡<span id="modalTotal"></span>
                            </div>
                        </div>
                    </div>

                    <hr>

                    <!-- Input cantidad -->
                    <label class="fw-bold mb-1">Nueva cantidad:</label>
                    <input type="number" min="1" id="inputCantidad" class="form-control">

                </div>

                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button class="btn btn-success fw-bold" id="btnGuardarCantidad">Guardar cambios</button>
                </div>

            </div>
        </div>
    </div>


    <div class="modal fade" id="modalEliminarProducto" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content shadow-lg">

                <!-- HEADER ROJO -->
                <div class="modal-header bg-danger" >
                    <h5 class="modal-title fw-bold">Confirmar Eliminación</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body text-center">

                    <div>
                        <img id="elimImagen" src="" width="100" class="rounded border mb-3">
                    </div>

                    <h5 id="elimNombre" class="fw-bold"></h5>

                    <p class="mt-2 text-muted">
                        ¿Seguro que deseas eliminar este producto del carrito?
                    </p>

                </div>

                <div class="modal-footer justify-content-between">
                    <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button class="btn btn-danger fw-bold" id="btnConfirmarEliminar">
                        Eliminar
                    </button>
                </div>

            </div>
        </div>
    </div>



    <script>
        document.addEventListener("DOMContentLoaded", () => {

            const modal = new bootstrap.Modal(document.getElementById("modalEditarCantidad"));
            const inputCantidad = document.getElementById("inputCantidad");
            const btnGuardar = document.getElementById("btnGuardarCantidad");

            // Campos del modal
            const modalNombre = document.getElementById("modalNombre");
            const modalImagen = document.getElementById("modalImagen");
            const modalPrecio = document.getElementById("modalPrecio");
            const modalTotal = document.getElementById("modalTotal");

            let filaActual = null;

            document.querySelectorAll(".btn-edit").forEach(btn => {
                btn.addEventListener("click", () => {

                    filaActual = btn.closest("tr");

                    // Extraer datos
                    const cantidad = btn.dataset.cantidad;
                    const nombre = filaActual.querySelector("td:nth-child(1) span").textContent;
                    const imagen = filaActual.querySelector("td:nth-child(2) img").src;
                    const precio = filaActual.querySelector("td:nth-child(4) span").textContent;
                    const total = filaActual.querySelector("td:nth-child(5) span").textContent;

                    // Llenar modal
                    inputCantidad.value = cantidad;
                    modalNombre.textContent = nombre;
                    modalImagen.src = imagen;
                    modalPrecio.textContent = precio;
                    modalTotal.textContent = total;

                    modal.show();
                });
            });

            btnGuardar.addEventListener("click", () => {

                const nuevaCantidad = parseInt(inputCantidad.value);
                if (nuevaCantidad < 1 || isNaN(nuevaCantidad)) return;

                filaActual.querySelector("td:nth-child(3) span").textContent = nuevaCantidad;
                filaActual.querySelector(".btn-edit").dataset.cantidad = nuevaCantidad;

                const precioUnitario = parseInt(filaActual.querySelector("td:nth-child(4) span").textContent);
                const nuevoTotal = precioUnitario * nuevaCantidad;

                filaActual.querySelector("td:nth-child(5) span").textContent = nuevoTotal;

                modal.hide();
            });

        });
    </script>




    <script>
        //Para eliminar productos
        document.addEventListener("DOMContentLoaded", () => {


            const modalEliminar = new bootstrap.Modal(document.getElementById("modalEliminarProducto"));
            const btnConfirmarEliminar = document.getElementById("btnConfirmarEliminar");

            const elimNombre = document.getElementById("elimNombre");
            const elimImagen = document.getElementById("elimImagen");

            let filaAEliminar = null;

            document.querySelectorAll(".btn-delete").forEach(btn => {
                btn.addEventListener("click", () => {

                    filaAEliminar = btn.closest("tr");

                    const nombre = filaAEliminar.querySelector("td:nth-child(1) span").textContent;
                    const imagen = filaAEliminar.querySelector("td:nth-child(2) img").src;

                    elimNombre.innerText = nombre;
                    elimImagen.src = imagen;

                    modalEliminar.show();
                });
            });

            // Confirmar eliminación
            btnConfirmarEliminar.addEventListener("click", () => {

                filaAEliminar.remove();

                modalEliminar.hide();
            });

        });
    </script>


</body>

</html>